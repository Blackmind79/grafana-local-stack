# О сборке
Данная сборка запускает стэк контейнеров `grafana - prometheus - node-exporter` для мониторинга состояния хоста (текущего компьютера)

# Требования для запуска
Что необходимо для запуска сборки:
- Установленный docker. Для системы Windows установленный Docker-desktop (с включенным движком WSL).
> Для включения движка WSL зайдите в Настройки (Settings) -> Общее (General) -> Включите движок WSL2 (Use the WSL 2 based engine)

Порядок действий:
1. Склонируйте проект с помощью HTTPS или SSH:
```
# HTTPS
git clone https://github.com/Blackmind79/grafana-local-stack.git

# SSH
git clone git@github.com:Blackmind79/grafana-local-stack.git
```

2. В файле `.env` рекомендую изменить имя администратора Grafana по-умолчанию `GF_SECURITY_ADMIN_USER`. 
3. Если вы работаете за обратным прокси, поставте точку входа в параметре `GF_SERVER_ROOT_URL`. Протокол оставьте `http`, так как иначе будет требовать установленный в grafana сертификат.
4. Для тестирования все контейнеры пробрасывают порты на хост. Если требуется только смотреть данные из `grafana`, то
раскомментируйте блоки `expose` и закомментируйте блоки `ports` в сервисах `prometheus` и `node-exporter`.
5. В файле `.gitignore` замените строку `!.env` на `.env`, чтобы ваши секретные параметры не утекли в репозиторий. Данный параметр оставлен как пример.

Запустите стэк командой в терминале (powershell) из клонированной папки
```
docker compose up -d
```

Данные для входа в grafana по-умолчанию (изменить User на вашего пользователя, если вы сменили `GF_SECURITY_ADMIN_USER`)
```
User: admin
Password: admin
```
После входа пароль требуется изменить.

Далее, перейдите в панели (Dashboards). Вы увидите уже настроенную панель `Node Exporter Full`, которая уже ссылается на ваш настроенный `Prometheus`.

# Немного подробнее
Будет создано три контейнера:
- grafana
- prometheus
- node-exporter

Контейнер `grafana` запустится, только если не будет проблем с запуском `prometheus` и `node-exporter`

Также будет создана сеть docker с именем `grafana`. Стек будет изолирован от других контейнеров системы.

> Так как используется WSL для Windows, то нет необходимости устанавливать windows-exporter